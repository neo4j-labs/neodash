<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>Embed test</title>
</head>

<body>
    <p>The page won't reload when passing global parameters via the url hash. You can verify this by playing the embedded YouTube video, then changing global parameters.</p>
    <pre></pre>
    <iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/y9trGgqFu_k" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</body>

<script>
    var pre = document.querySelector('pre');
    
    var applyHash = function() {
        const hashValue = window.location.hash.substr(1);
        pre.textContent = hashValue;
        searchParams = new URLSearchParams(hashValue);
        searchParams.forEach(function(value, key) {
            console.log(key, value);
        });
    }

    window.onhashchange = applyHash;
    applyHash();
</script>
</html>
